//******** НАСТРОКИ МАТРИЦЫ	**************************************************
	
	// управление по 3 портам ( настроины как выход без подтяжки )
	// устанавливаем три пина в режиме на выход и ниже указываем кол-во матриц MATRIXS_QUANTITY
	
	//=== указываем порты ( если в кубе назвали их DIN CLK CS то тогда нечего указывать не нужно )
		#if defined (DIN_GPIO_Port)
		#else
			#define DIN_GPIO_Port	GPIOC
			#define DIN_Pin			GPIO_PIN_5
		#endif
		
		#if defined (CLK_GPIO_Port)
		#else
			#define CLK_GPIO_Port   GPIOB
			#define CLK_Pin			GPIO_PIN_14
		#endif
		
		#if defined (CS_GPIO_Port)
		#else
			#define CS_GPIO_Port   GPIOB
			#define CS_Pin		   GPIO_PIN_14
		#endif
	//========================================================================================
		
	// Указываем кол-во матриц
	#define MATRIXS_QUANTITY 	4


//***************************************************************************



#include "MAX7219.h"
#include "animacion.h"



//-----------------------------------------
void main(){

		///////////////////////////////////////////////////////////////////////////////////////////

		MAX_init();  // initialise max7219

		uint8_t flag = 0;							// флаг чтоб поочереди было сперва бегущая строка после анимация и покругу
		
		char *myText = "Привет Мир 12345 Hello Jon QWERTY";
		
		// указываем кол-во символов с учетом что кириллица 2 байта ,а латиница 1 байт( для латиницы подойдет strlen(myText) )
		int len = strlenUTF8(myText);
		
		// ТОЛЬКО для отображения анимации------------------------------------------------------
		//x = ( 8*MATRIXS_QUANTITY );	// ставим для движения анимации с права на лево
		//x = 0; // для движения анимации с лево на право
		//---------------------------------------------------------------------------------------
		///////////////////////////////////////////////////////////////////////////////////////////
	
	
	//-------------------------------------------------
	while(1){
	
			///////////////////////////////////////////////////////////////////////////////////////////
			// ВЫВОДИМ БЕГУЩУЮ СТРОКУ	/////////////////////////////////////////
			//---------------------------------------------
			if( !flag){	
				drawString( myText, x, 0 );	// выводим на экран наш текст
							  
				display();	// отображаем на дисплее то что нарисовали выше
				HAL_Delay(100);

				if( --x < (len+1) * -8 ) {
					x = (MATRIXS_QUANTITY*8);
					flag=1;
				}
			}
			//---------------------------------------------
			//////////////////////////////////////////////////////////////////////
			else{	
				// ВІВОДИМ АНИМАЦИЮ		//////////////////////////////////////////////
				//-------------------------------------------------------------------
				
				clear();
				drawSprite( (uint8_t*)&a, x--, 0, 8, 8 ); // Х-- ставим для движения анимации с права на лево, Х++ для движения анимации с лево на право
				display();	// отображаем на дисплее то что нарисовали выше
				HAL_Delay(200);

				clear();
				drawSprite( (uint8_t*)&b, x--, 0, 8, 8 );	// Х-- ставим для движения анимации с права на лево, Х++ для движения анимации с лево на право
				display();	// отображаем на дисплее то что нарисовали выше
				HAL_Delay(200);
				
				// ВНИМАНИЕ ВІВОДИМ СТОЛЬКО КАДРОВ СКОЛЬКО ЕСТЬ ( в данном случае ДВА кадра )
						
						//-- для движения анимации с лево на право -----------
						//	if( x > ( 8*MATRIXS_QUANTITY ) ){
						//		x= -1;
						//	}
						//-----------------------------------------------------------

						//-----------------------------------------------------------	  
						//-- для движения анимации с права на лево -------------
						if( x <-6){
							x= ( 8*MATRIXS_QUANTITY );
							flag=0;
						}
				}		
			///////////////////////////////////////////////////////////////////////
	
	
	
	}

}